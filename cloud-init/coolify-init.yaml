#cloud-config
# 最小限の初期化
# Ansibleで本格的なセットアップを行う

package_update: true

packages:
  - curl
  - openssh-server
  - python3
  - python3-pip

# ユーザー設定
users:
  - name: ubuntu
    gecos: Ubuntu User
    sudo: ALL=(ALL) NOPASSWD:ALL
    ssh_authorized_keys: []
    lock_passwd: false
    passwd: $6$rounds=4096$abcdefghijklmnop$...  # ubuntu user用パスワードハッシュ

# Ansibleが接続できるよう最小構成で起動
ssh_pwauth: true
disable_root: false

runcmd:
  - echo "Cloud-init completed at $(date)" > /var/log/cloud-init-complete.log
