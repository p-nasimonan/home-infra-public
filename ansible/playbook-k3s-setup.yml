---
# ==========================================
# xanmanning.k3s ã‚’ä½¿ç”¨ã—ãŸ K3s ã‚¯ãƒ©ã‚¹ã‚¿ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# ==========================================
# ç”¨é€”:
#   - K3s ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ Proxmox VM ä¸Šã«è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
#   - embedded etcd ã«ã‚ˆã‚‹ HAæ§‹æˆï¼ˆ3 ãƒãƒ¼ãƒ‰ï¼‰
#   - Rancher ç®¡ç†ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ¥é€”ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½
#
# å®Ÿè¡Œæ–¹æ³•:
#   ansible-playbook -i inventory.ini playbook-k3s-setup.yml -v

- name: K3s ã‚¯ãƒ©ã‚¹ã‚¿ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  hosts: k3s_servers
  vars:
    # K3s ãƒªãƒªãƒ¼ã‚¹ç‰ˆï¼ˆfalse ã§æœ€æ–°å®‰å®šç‰ˆã‚’ä½¿ç”¨ï¼‰
    k3s_release_version: false
    # HA ã‚¯ãƒ©ã‚¹ã‚¿ç”¨ embedded etcd æœ‰åŠ¹åŒ–
    k3s_etcd_datastore: true
    # K3s ã‚µãƒ¼ãƒãƒ¼è¨­å®šï¼ˆåˆ¶å¾¡ãƒ—ãƒ¬ãƒ¼ãƒ³ï¼‰
    k3s_server:
      # Ingress Controller (traefik) ã‚’æœ‰åŠ¹åŒ–
      # Rancher / Helm apps ã®ã‚¢ã‚¯ã‚»ã‚¹ã«å¿…é ˆ
      disable:
        - servicelb
        # traefik ã¯æœ‰åŠ¹ï¼ˆRancher ingress ã«å¿…é ˆï¼‰
      # Flannel ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®š
      flannel-backend: vxlan
      # API ã‚µãƒ¼ãƒãƒ¼ç›£æŸ»ãƒ­ã‚°è¨­å®š
      audit-log-maxage: 30
      audit-log-maxbackup: 10
      audit-log-maxsize: 100
    # K3s ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šï¼ˆãƒ¯ãƒ¼ã‚«ãƒ¼ï¼‰
    k3s_agent:
      # ãƒãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«
      node-label:
        - "node-role=worker"
    # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
    k3s_skip_validation: false
    # Python 3 ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ‘ã‚¹
    ansible_python_interpreter: /usr/bin/python3
  
  pre_tasks:
    # Python ãŒãªã„å ´åˆã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - name: Python ãŒãªã„å ´åˆã¯ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—
      raw: |
        if command -v python3 >/dev/null 2>&1; then
          exit 0
        fi
        sudo apt-get update -y
        sudo apt-get install -y python3 python3-apt python3-pip
      changed_when: false

    # APT ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°
    - name: APT ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ã¨ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
      apt:
        update_cache: yes
        upgrade: dist
        autoremove: yes
        autoclean: yes
      become: yes

    # å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - name: å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      apt:
        name:
          - curl
          - wget
          - git
          - vim
          - htop
          - net-tools
          - ntp
        state: present
      become: yes

    # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ Asia/Tokyo ã«è¨­å®š
    - name: ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ Asia/Tokyo ã«è¨­å®š
      timezone:
        name: Asia/Tokyo
      become: yes

    # IP ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ‰åŠ¹åŒ–
    - name: IP ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ‰åŠ¹åŒ–
      sysctl:
        name: net.ipv4.ip_forward
        value: "1"
        sysctl_set: yes
        state: present
      become: yes

    # ãƒ–ãƒªãƒƒã‚¸ iptables ã‚µãƒãƒ¼ãƒˆç”¨ã‚«ãƒ¼ãƒãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ‰
    - name: br_netfilter ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰
      modprobe:
        name: br_netfilter
        state: present
      become: yes
      ignore_errors: yes

    # ãƒ–ãƒªãƒƒã‚¸ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šæœ‰åŠ¹åŒ–
    - name: ãƒ–ãƒªãƒƒã‚¸ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šæœ‰åŠ¹åŒ–
      sysctl:
        name: net.bridge.bridge-nf-call-iptables
        value: "1"
        sysctl_set: yes
        state: present
      become: yes
      ignore_errors: yes

    # k3s-server-1 ã‚’åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã«è¨­å®š
    - name: k3s-server-1 ã‚’åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã«è¨­å®š
      set_fact:
        k3s_control_node: true
      when: inventory_hostname == "k3s-server-1"

  roles:
    - role: xanmanning.k3s
      become: yes

  post_tasks:
    # K3s ãŒèµ·å‹•å®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿ
    - name: K3s ãŒèµ·å‹•å®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿ
      shell: |
        k3s kubectl get nodes
      register: k3s_nodes_ready
      until: k3s_nodes_ready.rc == 0 and k3s_nodes_ready.stdout_lines | length > 0
      retries: 30
      delay: 10

      when: k3s_control_node is defined and k3s_control_node

    # åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã‹ã‚‰ kubeconfig ã‚’å–å¾—
    - name: åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã‹ã‚‰ kubeconfig ã‚’å–å¾—
      fetch:
        src: /etc/rancher/k3s/k3s.yaml
        dest: ./kubeconfig.yaml
        flat: yes
      become: yes

      when: inventory_hostname == "k3s-server-1"

- name: Rancher ã‚µãƒ¼ãƒãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  hosts: rancher_servers
  vars:
    # K3s ãƒªãƒªãƒ¼ã‚¹ç‰ˆï¼ˆfalse ã§æœ€æ–°å®‰å®šç‰ˆã‚’ä½¿ç”¨ï¼‰
    k3s_release_version: false
    # å˜ä¸€ãƒãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹ã‚¿ï¼ˆã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ç„¡åŠ¹ï¼‰
    k3s_build_cluster: false
    # K3s ã‚µãƒ¼ãƒãƒ¼è¨­å®š
    k3s_server:
      # Ingress Controller (traefik) ã‚’æœ‰åŠ¹åŒ–
      # Rancher ã®ã‚¢ã‚¯ã‚»ã‚¹ã«å¿…é ˆ
      disable:
        - servicelb
        # traefik ã¯æœ‰åŠ¹ï¼ˆRancher ingress ã«å¿…é ˆï¼‰
    # Python 3 ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ‘ã‚¹
    ansible_python_interpreter: /usr/bin/python3
  
  pre_tasks:
    # Python ãŒãªã„å ´åˆã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - name: Python ãŒãªã„å ´åˆã¯ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—
      raw: |
        if command -v python3 >/dev/null 2>&1; then
          exit 0
        fi
        sudo apt-get update -y
        sudo apt-get install -y python3 python3-apt python3-pip
      changed_when: false

    # APT ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°
    - name: APT ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ã¨ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
      apt:
        update_cache: yes
        upgrade: dist
        autoremove: yes
        autoclean: yes
      become: yes

    # å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆDocker å«ã‚€ï¼‰
    - name: å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      apt:
        name:
          - curl
          - wget
          - git
          - vim
          - htop
          - net-tools
          - ntp
          - containerd
        state: present
      become: yes

    # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ Asia/Tokyo ã«è¨­å®š
    - name: ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ Asia/Tokyo ã«è¨­å®š
      timezone:
        name: Asia/Tokyo
      become: yes

    # IP ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ‰åŠ¹åŒ–
    - name: IP ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ‰åŠ¹åŒ–
      sysctl:
        name: net.ipv4.ip_forward
        value: "1"
        sysctl_set: yes
        state: present
      become: yes

    # ãƒ–ãƒªãƒƒã‚¸ iptables ã‚µãƒãƒ¼ãƒˆç”¨ã‚«ãƒ¼ãƒãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ‰
    - name: br_netfilter ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰
      modprobe:
        name: br_netfilter
        state: present
      become: yes
      ignore_errors: yes

    # ãƒ–ãƒªãƒƒã‚¸ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šæœ‰åŠ¹åŒ–
    - name: ãƒ–ãƒªãƒƒã‚¸ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šæœ‰åŠ¹åŒ–
      sysctl:
        name: net.bridge.bridge-nf-call-iptables
        value: "1"
        sysctl_set: yes
        state: present
      become: yes
      ignore_errors: yes

    # Rancher ã‚’åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã«è¨­å®š
    - name: Rancher ã‚’åˆ¶å¾¡ãƒãƒ¼ãƒ‰ã«è¨­å®š
      set_fact:
        k3s_control_node: true

  roles:
    - role: xanmanning.k3s
      become: yes

  post_tasks:
    # K3s ãŒèµ·å‹•å®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿ
    - name: K3s ãŒèµ·å‹•å®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿ
      shell: |
        k3s kubectl get nodes
      register: k3s_rancher_ready
      until: k3s_rancher_ready.rc == 0
      retries: 30
      delay: 10

# ==========================================
# Rancher ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (Helm ã‚’ä½¿ç”¨)
# ==========================================
# ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆåŒ–ï¼šå¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã¿ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹
# å†…éƒ¨: 192.168.0.30 ã§ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹å»ƒæ­¢
# å¤–éƒ¨: rancher.youkan.uk (Cloudflare Tunnel çµŒç”±) ã®ã¿
# ==========================================
- name: Deploy Rancher on k3s
  hosts: rancher_servers
  become: yes
  vars:
    # ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆ: å¤–éƒ¨ FQDN ã®ã¿ã‚’ä½¿ç”¨
    # ï¼ˆå†…éƒ¨ IP ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯è¨±å¯ã—ãªã„ï¼‰
    rancher_hostname: "rancher.youkan.uk"

    # Rancher ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (stable æ¨å¥¨)
    rancher_version: "v2.12.1"

    # cert-manager ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
    cert_manager_version: "v1.15.3"

    # Rancher ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆGitHub Actions Secret ã‹ã‚‰ï¼‰
    rancher_bootstrap_password: "{{ rancher_password | default('RancherAdmin2024!') }}"

  # k3s ã®ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ç’°å¢ƒå¤‰æ•°
  environment:
    KUBECONFIG: /etc/rancher/k3s/k3s.yaml

  tasks:
    # Python 3 ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿è¨­å®š
    - name: Python3 ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿è¨­å®šã®ç¢ºèª
      set_fact:
        ansible_python_interpreter: /usr/bin/python3

    # -----------------------------------------------
    # 1. ä¸‹æº–å‚™: å¿…è¦ãªãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    # -----------------------------------------------
    - name: Ansible k8s ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç”¨ Python ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      pip:
        name:
          - kubernetes>=21.0.0
          - pyyaml>=5.4.1
        state: present
        executable: pip3

    - name: Helm ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚)
      shell: |
        if ! command -v helm >/dev/null 2>&1; then
          curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
        fi
      args:
        executable: /bin/bash
      changed_when: false

    - name: Helm ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
      shell: helm version --short
      register: helm_version
      changed_when: false

    - name: Helm version æƒ…å ±ã‚’è¡¨ç¤º
      debug:
        msg: "{{ helm_version.stdout }}"

    # -----------------------------------------------
    # 2. Cert-Manager ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (Rancher å¿…é ˆè¦ä»¶)
    # -----------------------------------------------
    - name: Jetstack Helm ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ 
      kubernetes.core.helm_repository:
        name: jetstack
        repo_url: "https://charts.jetstack.io"
        kubeconfig: /etc/rancher/k3s/k3s.yaml

    - name: Helm ãƒªãƒã‚¸ãƒˆãƒªæ›´æ–°
      shell: helm repo update
      args:
        executable: /bin/bash

    - name: cert-manager ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      kubernetes.core.helm:
        name: cert-manager
        chart_ref: jetstack/cert-manager
        release_namespace: cert-manager
        create_namespace: yes
        version: "{{ cert_manager_version }}"
        values:
          installCRDs: true
        kubeconfig: /etc/rancher/k3s/k3s.yaml
        wait: yes
        wait_timeout: 10m

    - name: Cert-manager ãŒèµ·å‹•ã™ã‚‹ã¾ã§å¾…æ©Ÿ
      shell: |
        kubectl get deployment -n cert-manager cert-manager -o jsonpath='{.status.readyReplicas}' 2>/dev/null || echo 0
      environment:
        KUBECONFIG: /etc/rancher/k3s/k3s.yaml
      register: cert_manager_replicas
      until: cert_manager_replicas.stdout | int > 0
      retries: 30
      delay: 10

    # -----------------------------------------------
    # 3. Rancher æœ¬ä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    # -----------------------------------------------
    - name: Rancher Helm ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ 
      kubernetes.core.helm_repository:
        name: rancher-latest
        repo_url: "https://releases.rancher.com/server-charts/latest"
        kubeconfig: /etc/rancher/k3s/k3s.yaml

    - name: Rancher Server ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      kubernetes.core.helm:
        name: rancher
        chart_ref: rancher-latest/rancher
        release_namespace: cattle-system
        create_namespace: yes
        version: "{{ rancher_version }}"
        values:
          hostname: "{{ rancher_hostname }}"
          replicas: 1
          bootstrapPassword: "{{ rancher_bootstrap_password }}"
          ingress:
            enabled: true
            ingressClassName: traefik
            tls:
              source: letsEncrypt
              certManagerIssuer: letsencrypt-prod
        kubeconfig: /etc/rancher/k3s/k3s.yaml
        wait: yes
        wait_timeout: 15m

    # -----------------------------------------------
    # 4. Rancher èµ·å‹•ç¢ºèª
    # -----------------------------------------------
    - name: Rancher deployment ãŒèµ·å‹•ã™ã‚‹ã¾ã§å¾…æ©Ÿ
      shell: |
        kubectl get deployment -n cattle-system rancher -o jsonpath='{.status.readyReplicas}' 2>/dev/null || echo 0
      environment:
        KUBECONFIG: /etc/rancher/k3s/k3s.yaml
      register: rancher_replicas
      until: rancher_replicas.stdout | int > 0
      retries: 30
      delay: 10

    - name: Rancher ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      debug:
        msg: |
          ğŸ‰ Rancher ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸï¼
          
          ã€ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆï¼šå¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã¿ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã€‘
          
          URL: https://{{ rancher_hostname }}
          
          æ¥ç¶šãƒ•ãƒ­ãƒ¼ï¼š
          1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ https://rancher.youkan.uk
          2. Cloudflare Tunnel
          3. â†’ 192.168.0.30 (K3s Rancher)
          
          ã€åˆå›ãƒ­ã‚°ã‚¤ãƒ³ã€‘
          Username: admin
          Password: {{ rancher_bootstrap_password }}
          
          ã€Cloudflare Tunnel è¨­å®šã€‘
          ã™ã§ã«ãƒˆãƒ³ãƒãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆ:
          - Domain: rancher.youkan.uk
          - Service: https://rancher.youkan.uk
          
          æœªè¨­å®šã®å ´åˆã¯ cloudflared CLI ã§:
          cloudflared tunnel route dns <tunnel-name> rancher.youkan.uk
          
          ã€é‡è¦ã€‘
          âš ï¸ å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (192.168.0.30) ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“
          âš ï¸ å¤–éƒ¨ FQDN (rancher.youkan.uk) çµŒç”±ã®ã¿ã®æ¥ç¶šãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™
          âš ï¸ ã“ã‚Œã¯ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…ã§ã™

# ==========================================
# æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ArgoCD ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# ==========================================
# kubernetes/argocd-bootstrap.yml ã§ ArgoCD ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# ä»¥å¾Œã¯ Git commit ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
